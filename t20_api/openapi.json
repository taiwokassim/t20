{"openapi":"3.1.0","info":{"title":"Multi-Agent Workflow API (G2)","description":"API for orchestrating multi-agent workflows with real-time streaming, control, and webhook support.","version":"2.0.0"},"paths":{"/start":{"post":{"summary":"Start Workflow G2","description":"Initialize the system and create a workflow plan.","operationId":"start_workflow_g2_start_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StartRequest"}}},"required":true},"responses":{"202":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StartResponseG2"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/runs/{jobId}":{"post":{"summary":"Initiate Run G2","description":"Initiate the execution of a workflow plan.","operationId":"initiate_run_g2_runs__jobId__post","parameters":[{"name":"jobId","in":"path","required":true,"schema":{"type":"string","title":"Jobid"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RunRequest"}}}},"responses":{"202":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RunInitiatedResponseG2"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"summary":"Get Run Status G2","description":"Retrieve the current status and summary results of a workflow execution.","operationId":"get_run_status_g2_runs__jobId__get","parameters":[{"name":"jobId","in":"path","required":true,"schema":{"type":"string","title":"Jobid"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RunStatusResponseG2"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/runs/{jobId}/stream":{"get":{"summary":"Stream Workflow Events","description":"Stream real-time events for a workflow execution.","operationId":"stream_workflow_events_runs__jobId__stream_get","parameters":[{"name":"jobId","in":"path","required":true,"schema":{"type":"string","title":"Jobid"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/runs/{jobId}/control":{"post":{"summary":"Control Workflow","description":"Send control commands to a running workflow.","operationId":"control_workflow_runs__jobId__control_post","parameters":[{"name":"jobId","in":"path","required":true,"schema":{"type":"string","title":"Jobid"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ControlCommand"}}}},"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/webhooks":{"get":{"summary":"List Webhooks","description":"List registered webhook subscriptions.","operationId":"list_webhooks_webhooks_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/WebhookSubscription"},"type":"array","title":"Response List Webhooks Webhooks Get"}}}}}},"post":{"summary":"Register Webhook","description":"Register a new webhook subscription.","operationId":"register_webhook_webhooks_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WebhookSubscription"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object","title":"Response Register Webhook Webhooks Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/webhooks/{webhookId}":{"delete":{"summary":"Unregister Webhook","description":"Unregister a webhook subscription.","operationId":"unregister_webhook_webhooks__webhookId__delete","parameters":[{"name":"webhookId","in":"path","required":true,"schema":{"type":"string","title":"Webhookid"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/history/runs":{"get":{"summary":"List History Runs","description":"List historical workflow runs.","operationId":"list_history_runs_history_runs_get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":20,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/RunSummary"},"title":"Response List History Runs History Runs Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/history/runs/{jobId}/state":{"get":{"summary":"Get History Run State","description":"Retrieve the detailed state of a specific historical workflow run.","operationId":"get_history_run_state_history_runs__jobId__state_get","parameters":[{"name":"jobId","in":"path","required":true,"schema":{"type":"string","title":"Jobid"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RunStateDetail"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"ControlCommand":{"properties":{"command":{"type":"string","enum":["pause","resume","cancel"],"title":"Command"}},"type":"object","required":["command"],"title":"ControlCommand"},"ErrorResponse":{"properties":{"code":{"type":"string","title":"Code"},"message":{"type":"string","title":"Message"},"details":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Details"}},"type":"object","required":["code","message"],"title":"ErrorResponse"},"File":{"properties":{"path":{"type":"string","title":"Path"},"content":{"type":"string","title":"Content"}},"type":"object","required":["path","content"],"title":"File"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"Plan-Input":{"properties":{"high_level_goal":{"type":"string","title":"High Level Goal","description":"The main goal this plan is designed to achieve."},"reasoning":{"type":"string","title":"Reasoning","description":"A brief explanation of the plan's structure and strategy."},"roles":{"items":{"$ref":"#/components/schemas/Role-Input"},"type":"array","title":"Roles","description":"List of all roles required to execute the plan."},"tasks":{"items":{"$ref":"#/components/schemas/Task-Input"},"type":"array","title":"Tasks","description":"A step-by-step sequence of tasks to be executed in order."},"team":{"anyOf":[{"$ref":"#/components/schemas/Team-Input"},{"type":"null"}],"description":"Updates to team configuration or system prompts."}},"type":"object","required":["high_level_goal","reasoning","roles","tasks"],"title":"Plan","description":"Overall strategy with reasoning, roles, and tasks."},"Plan-Output":{"properties":{"high_level_goal":{"type":"string","title":"High Level Goal"},"reasoning":{"type":"string","title":"Reasoning"},"roles":{"items":{"$ref":"#/components/schemas/Role-Output"},"type":"array","title":"Roles"},"tasks":{"items":{"$ref":"#/components/schemas/Task-Output"},"type":"array","title":"Tasks"},"team":{"anyOf":[{"$ref":"#/components/schemas/Team-Output"},{"type":"null"}]}},"type":"object","required":["high_level_goal","reasoning","roles","tasks"],"title":"Plan"},"Prompt-Input":{"properties":{"agent":{"type":"string","title":"Agent","description":"Name of the agent this prompt is for. Must match exactly an existing agent."},"role":{"type":"string","title":"Role","description":"Role context of the agent."},"system_prompt":{"type":"string","title":"System Prompt","description":"Full text of the system prompt for this agent."}},"type":"object","required":["agent","role","system_prompt"],"title":"Prompt","description":"System prompt assigned to an agent."},"Prompt-Output":{"properties":{"agent":{"type":"string","title":"Agent"},"role":{"type":"string","title":"Role"},"system_prompt":{"type":"string","title":"System Prompt"}},"type":"object","required":["agent","role","system_prompt"],"title":"Prompt"},"Role-Input":{"properties":{"title":{"type":"string","title":"Title","description":"Title of the role (or an agent's name)."},"purpose":{"type":"string","title":"Purpose","description":"Purpose of the role (or an agent's goal)."}},"type":"object","required":["title","purpose"],"title":"Role","description":"Definition of an agent's role and goal in a team."},"Role-Output":{"properties":{"title":{"type":"string","title":"Title"},"purpose":{"type":"string","title":"Purpose"}},"type":"object","required":["title","purpose"],"title":"Role"},"RunInitiatedResponseG2":{"properties":{"jobId":{"type":"string","title":"Jobid"},"status":{"type":"string","title":"Status"},"statusStreamUrl":{"type":"string","maxLength":2083,"minLength":1,"format":"uri","title":"Statusstreamurl"},"controlUrl":{"type":"string","maxLength":2083,"minLength":1,"format":"uri","title":"Controlurl"}},"type":"object","required":["jobId","status","statusStreamUrl","controlUrl"],"title":"RunInitiatedResponseG2"},"RunRequest":{"properties":{"plan":{"$ref":"#/components/schemas/Plan-Input"},"rounds":{"type":"integer","title":"Rounds","default":1},"files":{"anyOf":[{"items":{"$ref":"#/components/schemas/File"},"type":"array"},{"type":"null"}],"title":"Files","default":[]}},"type":"object","required":["plan"],"title":"RunRequest"},"RunStateDetail":{"properties":{"jobId":{"type":"string","title":"Jobid"},"plan":{"$ref":"#/components/schemas/Plan-Output"},"executionLog":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Executionlog"},"finalStatus":{"type":"string","title":"Finalstatus"},"error":{"anyOf":[{"$ref":"#/components/schemas/ErrorResponse"},{"type":"null"}]}},"type":"object","required":["jobId","plan","executionLog","finalStatus"],"title":"RunStateDetail"},"RunStatusResponseG2":{"properties":{"jobId":{"type":"string","title":"Jobid"},"status":{"type":"string","enum":["pending","running","completed","failed","paused","cancelling","cancelled"],"title":"Status"},"results":{"anyOf":[{"items":{"$ref":"#/components/schemas/StepResultSummary"},"type":"array"},{"type":"null"}],"title":"Results"},"error":{"anyOf":[{"$ref":"#/components/schemas/ErrorResponse"},{"type":"null"}]}},"type":"object","required":["jobId","status"],"title":"RunStatusResponseG2"},"RunSummary":{"properties":{"jobId":{"type":"string","title":"Jobid"},"highLevelGoal":{"type":"string","title":"Highlevelgoal"},"startTime":{"type":"string","format":"date-time","title":"Starttime"},"endTime":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Endtime"},"status":{"type":"string","title":"Status"}},"type":"object","required":["jobId","highLevelGoal","startTime","status"],"title":"RunSummary"},"StartRequest":{"properties":{"high_level_goal":{"type":"string","title":"High Level Goal"},"files":{"anyOf":[{"items":{"$ref":"#/components/schemas/File"},"type":"array"},{"type":"null"}],"title":"Files","default":[]},"plan_from":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Plan From"},"orchestrator":{"type":"string","title":"Orchestrator","default":"Meta-AI"},"model":{"type":"string","title":"Model","default":"gemini-2.5-flash-lite"}},"type":"object","required":["high_level_goal"],"title":"StartRequest"},"StartResponseG2":{"properties":{"jobId":{"type":"string","title":"Jobid"},"plan":{"$ref":"#/components/schemas/Plan-Output"},"statusStreamUrl":{"type":"string","maxLength":2083,"minLength":1,"format":"uri","title":"Statusstreamurl"}},"type":"object","required":["jobId","plan","statusStreamUrl"],"title":"StartResponseG2"},"StepResultSummary":{"properties":{"stepId":{"type":"string","title":"Stepid"},"agent":{"type":"string","title":"Agent"},"status":{"type":"string","enum":["completed","failed","skipped"],"title":"Status"},"output":{"type":"string","title":"Output"}},"type":"object","required":["stepId","agent","status","output"],"title":"StepResultSummary"},"Task-Input":{"properties":{"id":{"type":"string","title":"Id","description":"Unique ID for the task (e.g., 'T-00.1', 'P-A02')."},"description":{"type":"string","title":"Description","description":"Detailed description of what to do for this task."},"role":{"type":"string","title":"Role","description":"The role responsible for this task."},"agent":{"type":"string","title":"Agent","description":"The agent assigned to this task."},"deps":{"items":{"type":"string"},"type":"array","title":"Deps","description":"List of requirements (task IDs, e.g. ['T-00.4', 'P-B01'])."}},"type":"object","required":["id","description","role","agent","deps"],"title":"Task","description":"A single actionable step in a plan."},"Task-Output":{"properties":{"id":{"type":"string","title":"Id"},"description":{"type":"string","title":"Description"},"role":{"type":"string","title":"Role"},"agent":{"type":"string","title":"Agent"},"deps":{"items":{"type":"string"},"type":"array","title":"Deps"}},"type":"object","required":["id","description","role","agent","deps"],"title":"Task"},"Team-Input":{"properties":{"notes":{"type":"string","title":"Notes","description":"General notes or feedback about the team's performance or the plan."},"prompts":{"items":{"$ref":"#/components/schemas/Prompt-Input"},"type":"array","title":"Prompts","description":"A list of new or updated system prompts for any agent in the team."}},"type":"object","required":["notes"],"title":"Team","description":"Metadata and coordination for the team."},"Team-Output":{"properties":{"notes":{"type":"string","title":"Notes"},"prompts":{"items":{"$ref":"#/components/schemas/Prompt-Output"},"type":"array","title":"Prompts"}},"type":"object","required":["notes","prompts"],"title":"Team"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"WebhookSubscription":{"properties":{"webhookId":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Webhookid"},"url":{"type":"string","maxLength":2083,"minLength":1,"format":"uri","title":"Url"},"events":{"items":{"type":"string"},"type":"array","title":"Events"},"secret":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Secret"}},"type":"object","required":["url"],"title":"WebhookSubscription"}}}}